angular.module("misc-js/angular-plugins",[]).filter("trustHtml",["$sce",function(c){return function(d){return c.trustAsHtml(d)}}]).filter("trustResourceUrl",["$sce",function(c){return function(d){return c.trustAsResourceUrl(d)}}]).directive("help",function(){return{restrict:"C",template:'<span class="summary" style="opacity: 0.5" ng-hide="expanded" ng-click="expanded = true"></span><span class="full" ng-show="expanded" ng-click="expanded = false" ng-transclude></span>',transclude:!0,scope:{},link:function(c,
d,a){a=d.children().eq(0);d=d.children().eq(1);c.expanded=!1;c=d.text().trim();c=c.slice(0,50)+(50<c.length?"...":"");a.text(c)}}}).directive("fixedflow",function(){return{restrict:"A",link:function(c,d,a){d.css("position","fixed");c=getComputedStyle(d[0]).height;a=angular.element("<div>");a.css("height",c);a.addClass("fixedflow-placeholder");d.after(a)}}}).directive("activateCurrentAnchor",["$window","$rootScope",function(c,d){return{scope:{activateCurrentAnchor:"@"},link:function(a,b,e){var f=a.activateCurrentAnchor||
"current",k=function(b){a.current_anchor&&a.current_anchor.classList.remove(f);b.classList.add(f);a.current_anchor=b};e=function(){var a=c.location.pathname,d=b.find("a"),e,f;for(e=0;f=d[e];e++)if(a==f.pathname)return k(f);for(e=0;f=d[e];e++)if(0===a.indexOf(f.pathname))return k(f)};d.$on("$locationChangeSuccess",e);e()}}}]).directive("jsonTransform",function(){return{restrict:"A",require:"ngModel",link:function(c,d,a,b){d.on("blur keyup change",function(){c.$apply(function(){b.$setViewValue(d.val())})});
b.$render=function(){d.val(b.$viewValue);d[0].dispatchEvent(new Event("input"))};b.$formatters.push(function(a){return null===a?"":angular.toJson(a,!0)});b.$parsers.push(function(a){""===a&&(a=null);try{return b.$setValidity("json",!0),angular.fromJson(a)}catch(d){b.$setValidity("json",!1)}})}}}).directive("enhance",function(){return{restrict:"A",require:"?ngModel",scope:{},link:function(c,d,a,b){var e=d[0];"textarea"==e.tagName.toLowerCase()&&(window.Textarea?window.Textarea.enhance(e):console.error("Cannot enhance <textarea> without first loading textarea.js",
e));b&&(b.$render=function(){e.value=void 0===b.$viewValue||null===b.$viewValue?"":b.$viewValue;setTimeout(function(){e.dispatchEvent(new Event("input"))},0)},d.on("blur keyup change",function(){c.$apply(function(){b.$setViewValue(e.value)})}))}}}).directive("score",function(){return{restrict:"A",scope:{score:"="},link:function(c,d,a){d.addClass("score");a=c.score;var b={};0>c.score?(a=0,b.borderLeft="1px dotted rgba(0, 0, 0, 0.2)"):100<c.score&&(a=100,b.borderRight="1px dotted black");b.width=a+
"%";b.backgroundColor="hsl("+(1.2*a).toFixed(2)+", 100%, 50%)";d.css(b)}}}).directive("ajaxform",["$http",function(c){return{restrict:"E",replace:!0,template:'<form ng-submit="submit($event)" ng-transclude></form>',transclude:!0,link:function(d,a,b){d.submit=function(a){"POST"!=b.method&&"GET"!=b.method&&(a.preventDefault(),c({method:b.method,url:b.action}).then(function(a){},function(){}))}}}}]).directive("checkboxSequence",function(){return{restrict:"A",link:function(c,d,a){var b=null,e=null;d.on("click",
'input[type="checkbox"]',function(a){var c=a.target.checked;if(a.shiftKey&&c===e&&b)for(var g=d.find('input[type="checkbox"]'),l=!1,m=0,n=g.length;m<n;m++){var h=g[m];if(h==b||h==a.target)if(!1===l)l=!0;else break;else l&&(h.checked=c,angular.element(h).triggerHandler("click"))}b=a.target;e=c})}}}).directive("mapObject",function(){return{restrict:"A",template:'<table class="map">  <tr ng-repeat="(key, val) in mapObject">    <td ng-bind="key"></td><td ng-bind="val"></td>  </tr></table>',replace:!0,
scope:{mapObject:"="}}}).directive("onUpload",["$parse",function(c){return{restrict:"A",compile:function(d,a){var b=c(a.onUpload);return function(d,c,k){c.on("change",function(c){d.$apply(function(){var f={$event:c};a.multiple?f.$files=c.target.files:f.$file=c.target.files[0];b(d,f)})})}}}}]).service("$flash",["$rootScope",function(c){return function(d,a){void 0===a&&(a=3E3);c.$broadcast("flash",d,a)}}]).directive("flash",["$timeout","$q",function(c,d){return{restrict:"E",template:'<div class="flash" ng-show="messages.length > 0"><span ng-repeat="message in messages track by $index" ng-bind="message"></span></div>',
replace:!0,scope:{messages:"&"},link:function(a,b,e){a.messages=[];a.add=function(c){a.messages.push(c)};a.remove=function(c){c=a.messages.indexOf(c);a.messages.splice(c,1)};a.$on("flash",function(b,e,g){a.add("...");b=function(b){a.remove("...");a.add(b);g&&c(function(){a.remove(b)},g)};d.when(e).then(b,b)})}}}]).factory("$laghttp",["$q","$http",function(c,d){return function(a){var b=c.defer();setTimeout(function(){d(a).then(b.resolve.bind(b),b.reject.bind(b))},250);return b.promise}}]).factory("$httpqueue",
["$q","$http",function(c,d){var a=c.defer(),b=a.promise;a.resolve();return function(a){return b=b.then(function(){return d(a)})}}]);
